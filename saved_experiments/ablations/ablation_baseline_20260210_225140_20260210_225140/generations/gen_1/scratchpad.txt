============================================================
SCRATCHPAD FOR GENERATION 1
============================================================


## Generation 0 Summary
- Best Score: 2.615866860608053 (trial_0_1) using Basin-hopping + SLSQP.
- trial_0_4 (2.5457) used a two-stage approach (equal radii then relaxation).
- Common failure: SLSQP constraint formatting and objective return types.
- Insight: For fixed centers, the optimal radii can be found via Linear Programming (LP).

## Strategy for Generation 1
- **Refinement**: Improve the best-performing basin-hopping approach (trial_0_1).
- **LP Integration**: Use LP to optimize radii for fixed centers, either as a final step or within the optimization loop.
- **Diversity**: Explore Differential Evolution and Penalty-based optimization to avoid local minima.
- **Initialization**: Use the best result from Gen 0 as a seed for further optimization.

## Generation 1 Insights
- Significant improvement: Best score jumped from 2.615 to 2.633 (trial_1_2).
- trial_1_2 used a "Growth and Repulsion" strategy followed by SLSQP. This suggests that a good physical-inspired initialization is superior to pure random or grid starts.
- trial_1_4 (score 2.624) used multiple grid initializations with SLSQP refinement.
- trial_1_3 (Differential Evolution) failed, likely due to the high dimensionality (78 variables) and complex constraints making the search space too difficult for DE without a better constraint handling mechanism.
- Bilevel optimization (LP for radii) in trial_1_1 was stable but didn't reach the top scores yet, possibly needing more iterations on the center positions.

## Strategy for Generation 2
- Combine the "Growth/Repulsion" initialization from trial_1_2 with the LP-based radii optimization.
- Explore "Basin-hopping" where the local minimization step is a full SLSQP run starting from a "Growth" phase.
- Investigate why trial_1_2 succeeded: was it the specific repulsion parameters or the simultaneous (x,y,r) optimization?

## Technical Deep Dive (Gen 1)
- **Jacobian Formulation**: trial_1_2 used squared distance constraints (xi-xj)^2 + (yi-yj)^2 >= (ri+rj)^2. This is more stable than sqrt(...) >= ri+rj.
- **Vectorization**: trial_1_2's use of np.triu_indices for Jacobian calculation significantly increased the number of optimization runs possible within the 300s limit.
- **Polishing**: trial_1_2's post-processing loop ensures that for fixed centers, radii are maximized to the point of contact. This is essentially a manual coordinate-descent version of the LP approach.
- **Multi-start vs Basin-hopping**: trial_1_2's random multi-start explored more basins than trial_1_0's basin-hopping, likely because the basin-hopping 'jumps' weren't as effective at finding new high-quality regions as fresh random starts.

## Plan for Gen 2
1. **Hybrid Strategy**: Use trial_1_2's vectorized SLSQP and squared-distance formulation but replace random starts with a mix of "Growth/Repulsion" starts and perturbed versions of the best known configuration.
2. **LP Radii**: Integrate a formal LP solver (scipy.optimize.linprog) for the final polishing step, as it is mathematically guaranteed to find the optimal radii for fixed centers.
3. **Adaptive Time Management**: Use the 300s budget more effectively - spend 200s on broad multi-start and 100s on intense refinement of the top 3 candidates.
